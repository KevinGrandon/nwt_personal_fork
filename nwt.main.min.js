(function(){function a(){}function c(){}function e(a){this.req=null,this.config={},this.url=a[0];var b=["success","failure","serialize"],c,d,e=this,f=function(a){return function(b){return e.config[a]=b,this}};for(c=0,d;d=b[c];c++)this[d]=f(d)}function f(a){b.implement("DelayableQueue",this),this._node=a}function g(){}function h(a){function h(a){return function(){for(var b=0,c;c=g.nodes[b];b++)c[a].apply(c,arguments)}}var b=[];for(var c=0,d;d=a[c];c++)b.push(new f(d));this.nodes=b;var e=["remove","addClass","removeClass"],g=this;for(var c=0,i;i=e[c];c++)this[i]=h(i)}a.prototype.implement=function(a,b){var c={DelayableQueue:["wait",function(){var a=[],b=!0;return getQueuedFunction=function(c){return function(){return console.log("Delaying function",arguments),b?(a.push([c,arguments,this]),this):(console.log("Running with context",this),c.apply(this,arguments))}},flushQueue=function(b){console.log("Flushing");while(a.length){var c=a.shift(),d;console.log("Flushing entry",c,"context of",b),d=c[0].apply(b,c[1]),console.log("got result",d),flushQueue(d)}},function(a){var c=this;for(var d in c){if(typeof c[d]!="function")continue;this[d]=getQueuedFunction.call(c,c[d])}return setTimeout(function(){b=!1,flushQueue(c)},a*1e3),c}}]};b[c[a][0]]=c[a][1]()};var b=new a;window.nwt=b,c.prototype.anim=function(a,b,c,d){d=d||"",c=c||1;var e=" "+c+"s "+d,f={"-webkit-transition":"all"+e,"-moz-transition":" all"+e,"-o-transition":" all"+e,"-ms-transition":" all"+e,transition:" all"+e},g=[];for(i in f)g.push(i),b[i]=f[i];return a.setStyles(b),a};var d=new c;b.anim=d.anim,e.prototype._run=function(a){var b=this;return this.req=new XMLHttpRequest,this.req.open(a,this.url),this.req.onreadystatechange=function(){var a;b.req.readyState==4&&b.req.status==200?a="success":b.req.readyState==4&&(a="failure"),a&&b.config[a]&&b.config[a](b.req)},this.req.send(),this},e.prototype.post=function(){return this._run("POST")},e.prototype.get=function(){return this._run("GET")},e.prototype.put=function(){return this._run("PUT")},e.prototype.delete=function(){},b.io=function(){return new e(arguments)},f.prototype.ancestor=function(a){var c=b.all(a),d=this._node,e=null,f=0;if(c.size()==0)return null;for(;;){c.each(function(a){a._node==d&&(e=a)});var g=d.parentNode;if(e||!g)break;d=g}return e?e:null},f.prototype.parent=function(){return this._node=this._node.parentNode,this},f.prototype.hasClass=function(a){return this._node.className&&this._node.className.indexOf(a)!==-1},f.prototype.addClass=function(a){return this.hasClass(a)||(this._node.className=this._node.className+" "+a),this},f.prototype.removeClass=function(a){return this._node.className=this._node.className.replace(a,""),this},f.prototype.data=function(a){return this._node.getAttribute("data-"+a)},f.prototype.get=function(a){if(a==="parentNode"){var b=this._node[a];return b?new f(b):null}return this._node[a]},f.prototype.set=function(a,b){return this._node[a]=b,this},f.prototype.getAttribute=function(a){return this._node.getAttribute(a)},f.prototype.setAttribute=function(a,b){return this._node.setAttribute(a,b),this},f.prototype.getStyle=function(a){if(!this.getAttribute("style"))return"";var b=this.getAttribute("style").match(new RegExp(a+":([a-zA-Z0-9-.]*);"),"");return b&&b[1]?b[1]:null},f.prototype._getRemainingStyles=function(a){var b,c=[],d=a.length;for(b=0;b<d;b+=1)c.push(a[b]);return this.getAttribute("style").replace(new RegExp("("+c.join("|")+"):[a-zA-Z0-9-]*;"),"")},f.prototype.removeStyle=function(a){return this.removeStyles(a)},f.prototype.removeStyles=function(a){return typeof a=="string"&&(a=[a]),this.setAttribute("style",this._getRemainingStyles(a))},f.prototype.setStyle=function(a,b){var c={};return c[a]=b,this.setStyles(c)},f.prototype.setStyles=function(a){this.getAttribute("style")||this.setAttribute("style","");var b="",c={top:"px",left:"px",width:"px",height:"px"},d,e,f=[];for(d in a)eachStyleVal=a[d],c[d]&&!isNaN(eachStyleVal)&&(eachStyleVal+=c[d]),b+=d+":"+eachStyleVal+";",f.push(d);return this.setAttribute("style",this._getRemainingStyles(f)+b),this},f.prototype.on=function(a,b){this._node.addEventListener(a,function(a){b(new NWTEventWrapper(a))},!1)},f.prototype.serialize=function(){var a="",b=this._node.getElementsByTagName("*");for(var c=0,d;d=b[c];c++)if(!d.disabled&&d.name&&d.name.length>0)switch(d.tagName.toLowerCase()){case"input":switch(d.type){case"checkbox":case"radio":d.checked&&(a.length>0&&(a+="&"),a+=d.name+"="+encodeURIComponent(d.value));break;case"hidden":case"password":case"text":a.length>0&&(a+="&"),a+=d.name+"="+encodeURIComponent(d.value)}break;case"select":case"textarea":a.length>0&&(a+="&"),a+=d.name+"="+encodeURIComponent(d.value)}return a},f.prototype.getContent=function(a){return this._node.innerHTML},f.prototype.setContent=function(a){this._node.innerHTML=a},f.prototype.next=function(){var a=this._node.nextSibling;return new f(a)},f.prototype.previous=function(){var a=this._node.previousSibling;return new f(a)},f.prototype.one=function(a){var b=this._node.querySelector(a);return new f(b)},f.prototype.all=function(a){var b=this._node.querySelectorAll(a);return new h(b)},f.prototype.append=function(a){return a instanceof f&&(a=a._node),this._node.appendChild(a),this},f.prototype.remove=function(){this._node.parentNode.removeChild(this._node)},f.prototype.insert=function(a,b){b=b||"before",b=="before"?this._node.parentNode.insertBefore(a._node,this._node):b=="after"&&this._node.parentNode.insertBefore(a._node,this.next()._node)},f.prototype.click=function(){var a=document.createEvent("HTMLEvents");return a.initEvent("click",!0,!0),!this._node.dispatchEvent(a)},f.prototype.anim=function(a,c,d){return b.anim(this,a,c,d)},g.prototype.create=function(a){var b=document.createElement("div");return b.innerHTML=a,new f(b.childNodes[0])},g.prototype.one=function(a){if(typeof a=="string"){var b=document.querySelectorAll(a);return b.length==0?null:new f(b[0])}return new f(a)},g.prototype.all=function(a){var b=document.querySelectorAll(a);return new h(b)},b.node=new g,b.one=b.node.one,h.prototype.each=function(a){for(var b=0,c;c=this.nodes[b];b++)a(c)},h.prototype.item=function(a){return this.nodes[a]},h.prototype.size=function(){return this.nodes.length},b.all=b.node.all})()